# Agentèƒ½åŠ›å¿«é€Ÿå‚è€ƒ

## ğŸ¯ æ ¸å¿ƒèƒ½åŠ›æ¦‚è§ˆ

### 1. å¤šè½®å¯¹è¯ ğŸ’¬
- **æ™ºèƒ½æ„å›¾è¯†åˆ«**: è‡ªåŠ¨è¯†åˆ«ç”¨æˆ·æ˜¯æƒ³èŠå¤©è¿˜æ˜¯æ‰§è¡Œä»»åŠ¡
- **ä¸Šä¸‹æ–‡è®°å¿†**: ç»´æŠ¤å¯¹è¯å†å²ï¼Œæ”¯æŒè¿ç»­å¯¹è¯
- **ä¸ªæ€§åŒ–å“åº”**: åŸºäºAgentç‰¹æ€§çš„ä¸ªæ€§åŒ–å¯¹è¯ä½“éªŒ

### 2. ä»»åŠ¡æ‰§è¡Œ âš¡
- **çœŸå®æ‰§è¡Œ**: çœŸæ­£æ‰§è¡ŒAgenté…ç½®çš„MCPå·¥ä½œæµ
- **å·¥ä½œæµå¼•æ“**: æ”¯æŒå¤šæ­¥éª¤ã€é“¾å¼å·¥å…·è°ƒç”¨
- **æ™ºèƒ½é”™è¯¯å¤„ç†**: å®Œå–„çš„é”™è¯¯å¤„ç†å’Œæ¢å¤æœºåˆ¶

### 3. æµå¼å“åº” ğŸŒŠ
- **å®æ—¶åé¦ˆ**: æµå¼è¿”å›å¤„ç†è¿›åº¦å’Œç»“æœ
- **ä½å»¶è¿Ÿ**: å®æ—¶å“åº”ç”¨æˆ·äº¤äº’
- **æ¸è¿›å¼åŠ è½½**: é€æ­¥å‘ˆç°æ‰§è¡Œç»“æœ

## ğŸ”§ å…³é”®å®ç°ä½ç½®

| åŠŸèƒ½ | æ–‡ä»¶ä½ç½® | æ ¸å¿ƒæ–¹æ³• |
|------|----------|----------|
| å¤šè½®å¯¹è¯ | `src/services/conversationService.ts` | `handleAgentTrialConversation()` |
| æµå¼å¯¹è¯ | `src/services/conversationService.ts` | `handleAgentTrialConversationStream()` |
| ä»»åŠ¡æ‰§è¡Œ | `src/services/agentService.ts` | `executeAgentTask()` |
| æµå¼ä»»åŠ¡æ‰§è¡Œ | `src/services/conversationService.ts` | `executeAgentTaskStream()` |
| æ„å›¾è¯†åˆ« | `src/services/conversationService.ts` | `analyzeAgentUserIntent()` |

## ğŸ­ å…³é”®æµå¼äº‹ä»¶

### Agentå¤„ç†äº‹ä»¶
```typescript
// AgentåŠ è½½
'agent_loading' | 'agent_loaded'

// æ„å›¾åˆ†æ
'agent_intent_analysis'

// ä»»åŠ¡æ‰§è¡Œ
'task_creation_start' | 'task_created' | 'workflow_applying' | 'workflow_applied'
'task_execution_start' | 'task_execution_progress' | 'task_execution_complete'

// èŠå¤©å“åº”
'agent_chat_response'

// å®Œæˆ
'agent_processing_complete'
```

## ğŸŒ APIç«¯ç‚¹

### Agentè¯•ç”¨
```bash
POST /api/agent/trial
{
  "agentId": "agent-id",
  "content": "ç”¨æˆ·æ¶ˆæ¯"
}
```

### æµå¼å¯¹è¯
```bash
POST /api/conversation/:id/message/stream
{
  "content": "ç”¨æˆ·æ¶ˆæ¯"
}
```

## ğŸ”„ å…¸å‹å·¥ä½œæµç¨‹

### 1. Agentè¯•ç”¨æµç¨‹
```
ç”¨æˆ·è¯·æ±‚ â†’ AgentåŠ è½½ â†’ æ„å›¾åˆ†æ â†’ èŠå¤©/ä»»åŠ¡åˆ†æµ â†’ æ‰§è¡Œå¤„ç† â†’ è¿”å›ç»“æœ
```

### 2. æµå¼å¯¹è¯æµç¨‹
```
å»ºç«‹SSEè¿æ¥ â†’ æ¥æ”¶æ¶ˆæ¯ â†’ æµå¼å¤„ç† â†’ å®æ—¶åé¦ˆ â†’ å®Œæˆå“åº”
```

### 3. ä»»åŠ¡æ‰§è¡Œæµç¨‹
```
åˆ›å»ºä»»åŠ¡ â†’ åº”ç”¨å·¥ä½œæµ â†’ è°ƒç”¨TaskExecutorService â†’ æ‰§è¡ŒMCPå·¥å…· â†’ è¿”å›ç»“æœ
```

## âœ… å·²ä¿®å¤çš„å…³é”®é—®é¢˜

- **AgentçœŸæ­£æ‰§è¡Œä»»åŠ¡**: ä¸å†è¿”å›é™æ€æ–‡æœ¬ï¼Œè€Œæ˜¯çœŸæ­£æ‰§è¡Œå·¥ä½œæµ
- **æµå¼ä»»åŠ¡æ‰§è¡Œ**: æ”¯æŒå®æ—¶ä»»åŠ¡æ‰§è¡Œåé¦ˆ
- **æ„å›¾è¯†åˆ«ä¼˜åŒ–**: åŸºäºAgentç‰¹æ€§çš„æ™ºèƒ½æ„å›¾åˆ†æ

## ğŸ¯ ä½¿ç”¨åœºæ™¯

1. **Agentè¯•ç”¨**: ç”¨æˆ·å¯ä»¥è¯•ç”¨Agentçš„èƒ½åŠ›
2. **å¤šè½®å¯¹è¯**: ä¸Agentè¿›è¡Œè¿ç»­å¯¹è¯
3. **ä»»åŠ¡æ‰§è¡Œ**: Agentæ‰§è¡Œå…·ä½“çš„å·¥ä½œæµä»»åŠ¡
4. **æµå¼äº¤äº’**: å®æ—¶è·å–å¤„ç†è¿›åº¦å’Œç»“æœ

è¿™ä¸ªAgentç³»ç»Ÿç°åœ¨æ˜¯ä¸€ä¸ªå®Œæ•´çš„ã€ç”Ÿäº§å°±ç»ªçš„æ™ºèƒ½å¯¹è¯å’Œä»»åŠ¡æ‰§è¡Œå¹³å°ï¼ 